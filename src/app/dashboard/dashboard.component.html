    <!-- üü¢ TARJETA DE DESCARGA DE BACKUP (NUEVA) üü¢ -->
  <!--   <mat-card class="cardWithShadow overflow-hidden" 
              [class.generating]="isDownloadingDB">
        <mat-card-content class="p-b-0">
            <div class="d-flex align-items-center m-b-8">
                <mat-card-title><h5>Backup de Base de Datos</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48 bg-primary">
                        <!-- Icono de base de datos o descarga - ->
                        <i-feather name="database" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
            </div>
            <h4 class="f-s-24 m-b-6">Seguridad y Respaldo</h4>
            <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                <p class="f-s-14 m-0">Genera y descarga un dump completo de la DB.</p>
            </div>
            
            <!-- Bot√≥n de descarga de DB - ->
            <button mat-stroked-button 
                    class="report-button" 
                    (click)="onDownloadDbClick()"
                    [disabled]="isDownloadingDB">
                <!-- Icono de descarga - ->
                <mat-icon *ngIf="!isDownloadingDB" fontIcon="download"></mat-icon>
                <span *ngIf="!isDownloadingDB">Descargar Backup (SQL)</span>
                <span *ngIf="isDownloadingDB">‚è≥ Generando...</span>
            </button>
        </mat-card-content>
    </mat-card> -->


@if (role === 'admin' || this.role === 'admin RRHH' || role === 'auditor') {
    <!--1 cantidad de usuario -->
    <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
              (click)="generatePdf()"
              [class.generating]="generatingReport">
        <mat-card-content class="p-b-0">
            <div class="d-flex align-items-center m-b-8">
                <!-- <mat-card-title><h5>Total Usuarios</h5></mat-card-title> -->
                <mat-card-title><h5>Registro Anual de Usuarios</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48 ">
                        <i-feather name="users" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
            </div>
            <h4 class="f-s-24 m-b-6">{{countUsers}}</h4>
            <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                <div class="d-flex align-items-center">
                     <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                     <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),null,'anio') }}</div>
                </div>
            </div>
            
            <!-- Bot√≥n de imprimir reporte mejorado -->
            <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                <span *ngIf="!generatingReport">Imprimir Reporte</span>
                <span *ngIf="generatingReport">‚è≥ Generando...</span>
            </button>
        </mat-card-content>
    </mat-card>

    <!--2 cantidad de insumos al dia-->
    <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
              (click)="generatePdfRegistryMedicalSupplies('hoy')"
              [class.generating]="generatingReport">
        <mat-card-content class="p-b-0">
            <div class="d-flex align-items-center m-b-8">
                <mat-card-title><h5>Registros de Insumos M√©dicos (Hoy)</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48  ">
                        <i-feather name="activity" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
            </div>
            <h4 class="f-s-24 m-b-6">{{countProductsOfTheDay}}</h4>
            <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                <div class="d-flex align-items-center">
                     <mat-icon fontIcon="calendar_today" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                     <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(), null) }}</div>
                </div>
            </div>
            
            <!-- Bot√≥n de imprimir reporte mejorado -->
            <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                <span *ngIf="!generatingReport">Imprimir Reporte</span>
                <span *ngIf="generatingReport">‚è≥ Generando...</span>
            </button>
        </mat-card-content>
    </mat-card>

    <!--3 cantidad de insumos mes-->
    <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
              (click)="generatePdfRegistryMedicalSupplies('mes')"
              [class.generating]="generatingReport">
        <mat-card-content class="p-b-0">
            <div class="d-flex align-items-center m-b-8">
                <mat-card-title><h5>Registros de Insumos M√©dicos (Mes)</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48  ">
                        <i-feather name="briefcase" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
            </div>
            <h4 class="f-s-24 m-b-6">{{countProductsOfMonth}}</h4>
            <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                <div class="d-flex align-items-center">
                     <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                     <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),'mes') }}</div>
                </div>
            </div>
            
            <!-- Bot√≥n de imprimir reporte mejorado -->
            <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                <span *ngIf="!generatingReport">Imprimir Reporte</span>
                <span *ngIf="generatingReport">‚è≥ Generando...</span>
            </button>
        </mat-card-content>
    </mat-card>
}

@if (this.role === 'almacen' || this.role === 'medico') {
    <!-- cantidad total de productos -->
    <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
              (click)="generatePdfRegistryMedicalSupplies('todos')"
              [class.generating]="generatingReport">
        <mat-card-content class="p-b-0">
            <div class="d-flex align-items-center m-b-8">
                <mat-card-title><h5>Registro Anual de Insumos M√©dicos</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48  ">
                        <i-feather name="users" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
            </div>
            <h4 class="f-s-24 m-b-6">{{countAllProducts}}</h4>
            <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                <div class="d-flex align-items-center">
                     <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                     <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),null,'anio') }}</div>
                </div>
            </div>
            
            <!-- Bot√≥n de imprimir reporte mejorado -->
            <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                <span *ngIf="!generatingReport">Imprimir Reporte</span>
                <span *ngIf="generatingReport">‚è≥ Generando...</span>
            </button>
        </mat-card-content>
    </mat-card>
}

@if (this.role === 'admin' || this.role === 'admin RRHH'  || this.role === 'almacen' || role === 'auditor') {
    <!--4 cantidad de asignaciones de productos realizadas en el dia-->
    <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
              (click)="pdfRegistryAssignmentsMedicalSupplies_MonthOrToday('hoy')"
              [class.generating]="generatingReport">
        <mat-card-content class="p-b-0">
            <div class="d-flex align-items-center m-b-8">
                <mat-card-title><h5>Registros de Asignaciones (Hoy)</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48  ">
                        <i-feather name="activity" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
            </div>
            <h4 class="f-s-24 m-b-6">{{countAssignmentOfTheDay}}</h4>
            <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                <div class="d-flex align-items-center">
                     <mat-icon fontIcon="calendar_today" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                     <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(), null) }}</div>
                </div>
            </div>
            
            <!-- Bot√≥n de imprimir reporte mejorado -->
            <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                <span *ngIf="!generatingReport">Imprimir Reporte</span>
                <span *ngIf="generatingReport">‚è≥ Generando...</span>
            </button>
        </mat-card-content>
    </mat-card>

    <!--5 cantidad de asignaciones de productos realizadas en el mes-->
    <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
              (click)="pdfRegistryAssignmentsMedicalSupplies_MonthOrToday('mes')"
              [class.generating]="generatingReport">
        <mat-card-content class="p-b-0">
            <div class="d-flex align-items-center m-b-8">
                <mat-card-title><h5>Registros de Asignaciones (Mes)</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48  ">
                        <i-feather name="briefcase" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
            </div>
            <h4 class="f-s-24 m-b-6">{{countAssignmentOfMonth}}</h4>
            <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                <div class="d-flex align-items-center">
                     <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                     <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),'mes') }}</div>
                </div>
            </div>
            
            <!-- Bot√≥n de imprimir reporte mejorado -->
            <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                <span *ngIf="!generatingReport">Imprimir Reporte</span>
                <span *ngIf="generatingReport">‚è≥ Generando...</span>
            </button>
        </mat-card-content>
    </mat-card>
}

@if (this.role === 'medico') {
    <!-- cantidad total de asignaciones -->
    <mat-card class="cardWithShadow overflow-hidden cursor_pointer"
              (click)="pdfRegistryAssignmentsMedicalSupplies_MonthOrToday('anio')"
              [class.generating]="generatingReport">
        <mat-card-content class="p-b-0">
            <div class="d-flex align-items-center m-b-8">
                <mat-card-title><h5>Registro Anual de las Asignaciones de Insumos M√©dicos a Empleados</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48 bg-primary ">
                        <i-feather name="users" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
            </div>
            <h4 class="f-s-24 m-b-6">{{countAllAssignments}}</h4>
            <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                <div class="d-flex align-items-center">
                     <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                     <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),null,'anio') }}</div>
                </div>
            </div>
            
            <!-- Bot√≥n de imprimir reporte mejorado -->
            <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                <span *ngIf="!generatingReport">Imprimir Reporte</span>
                <span *ngIf="generatingReport">‚è≥ Generando...</span>
            </button>
        </mat-card-content>
    </mat-card>
}

@if((this.role === 'admin' || this.role === 'admin RRHH' || this.role === 'almacen') && getAccumulatedProductsStockByType && getAccumulatedAssignmentsByType){
    <!--6 Total Medicamentos Disponibles -->
        <mat-card class="cardWithShadow overflow-hidden cursor_pointer"
              (click)="pdfMedicalSuppliesAvailables(1)"
              [class.generating]="generatingReport">
            <mat-card-content class="p-b-0">
                <div class="d-flex align-items-center m-b-8">
                    <mat-card-title><h5>Total Medicamentos Disponibles(Mes)</h5></mat-card-title>
                    <div class="m-l-auto">
                        <button mat-fab class="icon-48  ">
                            <i-feather name="activity" class="icon-20 d-flex align-items-center color-white"></i-feather>
                        </button>
                    </div>
                </div>
                <h4 class="f-s-24 m-b-6">{{getAccumulatedProductsStockByType.sum_medicamentos}}</h4>
                <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                    <div class="d-flex align-items-center">
                        <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                        <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),'mes') }}</div>
                    </div>
                </div>
                
                <!-- Bot√≥n de imprimir reporte mejorado -->
                <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                    <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                    <span *ngIf="!generatingReport">Imprimir Reporte</span>
                    <span *ngIf="generatingReport">‚è≥ Generando...</span>
                </button>
            </mat-card-content>
        </mat-card>
<!-- 7 Total Medicamentos Asignados-->
        <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
                  (click)="pdfStockAssignmentsBySupplyType_Month(1)"
                  [class.generating]="generatingReport">
            <mat-card-content class="p-b-0">
                <div class="d-flex align-items-center m-b-8">
                    <mat-card-title><h5>Total Medicamentos Asignados(Mes)</h5></mat-card-title>
                    <div class="m-l-auto">
                        <button mat-fab class="icon-48  ">
                            <i-feather name="activity" class="icon-20 d-flex align-items-center color-white"></i-feather>
                        </button>
                    </div>
                </div>
                <h4 class="f-s-24 m-b-6">{{getAccumulatedAssignmentsByType.sumAsig_medicamentos }}</h4>
                <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                    <div class="d-flex align-items-center">
                        <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                        <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),'mes') }}</div>
                    </div>
                </div>
                
                <!-- Bot√≥n de imprimir reporte mejorado -->
                <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                    <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                    <span *ngIf="!generatingReport">Imprimir Reporte</span>
                    <span *ngIf="generatingReport">‚è≥ Generando...</span>
                </button>
            </mat-card-content>
        </mat-card>
<!-- 8 Total Uniformes Disponibles-->
        <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
                      (click)="pdfMedicalSuppliesAvailables(2)"
                      [class.generating]="generatingReport">
           <mat-card-content class="p-b-0">
               <div class="d-flex align-items-center m-b-8">
                   <mat-card-title><h5>Total Uniformes Disponibles(Mes)</h5></mat-card-title>
                    <div class="m-l-auto">
                        <button mat-fab class="icon-48  ">
                            <i-feather name="activity" class="icon-20 d-flex align-items-center color-white"></i-feather>
                        </button>
                    </div>
               </div>
               <h4 class="f-s-24 m-b-6">{{getAccumulatedProductsStockByType.sum_uniformes}}</h4>
                <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                    <div class="d-flex align-items-center">
                        <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                        <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),'mes') }}</div>
                    </div>
                </div>
               
               <!-- Bot√≥n de imprimir reporte mejorado -->
               <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                   <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                   <span *ngIf="!generatingReport">Imprimir Reporte</span>
                   <span *ngIf="generatingReport">‚è≥ Generando...</span>
               </button>
           </mat-card-content>
       </mat-card> 
<!-- 9 Total Uniformes Asignados -->
       <mat-card class="cardWithShadow overflow-hidden cursor_pointer"
                         (click)="pdfStockAssignmentsBySupplyType_Month(2)"
                         [class.generating]="generatingReport">
          <mat-card-content class="p-b-0">
              <div class="d-flex align-items-center m-b-8">
                  <mat-card-title><h5>Total Uniformes Asignados(Mes)</h5></mat-card-title>
                    <div class="m-l-auto">
                        <button mat-fab class="icon-48  ">
                            <i-feather name="activity" class="icon-20 d-flex align-items-center color-white"></i-feather>
                        </button>
                    </div>
              </div>
              <h4 class="f-s-24 m-b-6">{{getAccumulatedAssignmentsByType.sumAsig_uniformes}}</h4>
                <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                    <div class="d-flex align-items-center">
                        <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                        <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),'mes') }}</div>
                    </div>
                </div>
              
              <!-- Bot√≥n de imprimir reporte mejorado -->
              <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                  <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                  <span *ngIf="!generatingReport">Imprimir Reporte</span>
                  <span *ngIf="generatingReport">‚è≥ Generando...</span>
              </button>
          </mat-card-content>
      </mat-card> 
<!-- 10 Total Equipos Odontol√≥gicos Disponibles-->
      <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
                (click)="pdfMedicalSuppliesAvailables(3)"
                [class.generating]="generatingReport">
          <mat-card-content class="p-b-0">
              <div class="d-flex align-items-center m-b-8">
                <mat-card-title><h5>Total Equipos Odontol√≥gicos Disponibles(Mes)</h5></mat-card-title>
                <div class="m-l-auto">
                    <button mat-fab class="icon-48  ">
                        <i-feather name="activity" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
              </div>
              <h4 class="f-s-24 m-b-6">{{getAccumulatedProductsStockByType.sum_equiposOdontologicos}}</h4>
                <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                    <div class="d-flex align-items-center">
                        <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                        <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),'mes') }}</div>
                    </div>
                </div>
              
              <!-- Bot√≥n de imprimir reporte mejorado -->
              <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                  <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                  <span *ngIf="!generatingReport">Imprimir Reporte</span>
                  <span *ngIf="generatingReport">‚è≥ Generando...</span>
              </button>
          </mat-card-content>
      </mat-card>
<!-- 11  Total Equipos Odontol√≥gicos Asignados-->
      <mat-card class="cardWithShadow overflow-hidden cursor_pointer"
                (click)="pdfStockAssignmentsBySupplyType_Month(3)"
                [class.generating]="generatingReport">
          <mat-card-content class="p-b-0">
              <div class="d-flex align-items-center m-b-8">
                  <mat-card-title><h5>Total Equipos Odontol√≥gicos Asignados(Mes)</h5></mat-card-title>
                  <div class="m-l-auto">
                    <button mat-fab class="icon-48  ">
                        <i-feather name="activity" class="icon-20 d-flex align-items-center color-white"></i-feather>
                    </button>
                </div>
              </div>
              <h4 class="f-s-24 m-b-6">{{getAccumulatedAssignmentsByType.sumAsig_equiposOdontologicos}}</h4>
                <div class="d-flex align-items-center m-t-32" class="ocultar-en-movil-tablet">
                    <div class="d-flex align-items-center">
                        <mat-icon fontIcon="calendar_month" aria-label="2025" aria-hidden="false" class="text-accent d-flex"></mat-icon>
                        <div class="m-l-12 f-s-14">{{ formatearFecha(getLocalDate(),'mes') }}</div>
                    </div>
                </div>
              
              <!-- Bot√≥n de imprimir reporte mejorado -->
              <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                  <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                  <span *ngIf="!generatingReport">Imprimir Reporte</span>
                  <span *ngIf="generatingReport">‚è≥ Generando...</span>
              </button>
          </mat-card-content>
      </mat-card>
}

<!-- vencimiento de insumos -->
@if(getExpiredProductsCount && this.role != 'enfermero(a)' ){
      <mat-card class="cardWithShadow overflow-hidden cursor_pointer" 
      (click)="navigate('/expired-medical-supplies')">
          <mat-card-content class="p-b-0">
              <div class="d-flex align-items-center m-b-8">
                  <mat-card-title><h5>Insumos M√©dicos Pr√≥ximos a Vencer</h5></mat-card-title>
                  <div class="m-l-auto">
                     <button mat-fab class="icon-48 bg-error ">
                         <i-feather name="alert-triangle" class="icon-20 d-flex align-items-center color-white"></i-feather>
                     </button>
                 </div>
              </div>
              <h4 class="f-s-24 m-b-6">{{getExpiredProductsCount}}</h4>
              
              <!-- Bot√≥n de imprimir reporte mejorado -->
<!--               <button mat-stroked-button class="report-button" [disabled]="generatingReport">
                  <mat-icon *ngIf="!generatingReport" fontIcon="download"></mat-icon>
                  <span *ngIf="!generatingReport">Imprimir Reporte</span>
                  <span *ngIf="generatingReport">‚è≥ Generando...</span>
              </button> -->
          </mat-card-content>
      </mat-card> 
}
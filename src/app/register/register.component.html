<div class="blank-layout-container justify-content-center align-items-center bg-light" id="register">
    <div class="position-relative row w-100 h-100 bg-gredient justify-content-center">
      <div class="col-lg-4 d-flex align-items-center">
        <mat-card class="cardWithShadow boxed-auth">
          <mat-card-content class="p-32">
            <!-- <div class="text-center">
                <img src="./../../../../assets/images/user.png" class="align-middle" alt="logo" width="70" />
            </div> -->
  
            <form class="m-t-30" [formGroup]="registerFormGroup" #f="ngForm">
              <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Nombre</mat-label>
              <mat-form-field appearance="outline" class="w-100" color="primary">
                <input
                matInput
                placeholder="Nombre"
                formControlName="name"
                required="true"
                type="text"
                />
              <mat-error *ngIf="registerFormGroup.controls['name'].errors"> 
                <ng-container *ngIf="registerFormGroup.controls['name'].hasError('required')">
                  El nombre es requerido.
                </ng-container>
                <ng-container *ngIf="registerFormGroup.controls['name'].hasError('maxlength')">
                  No puede tener más de 50 caracteres.
                </ng-container>
              </mat-error>
              </mat-form-field>

              <!-- Email -->
              <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Email</mat-label>
              <mat-form-field appearance="outline" class="w-100" color="primary">
                <input
                matInput
                placeholder="Email"
                formControlName="email"
                required="true"
                type="email"
                />
              <mat-error *ngIf="registerFormGroup.controls['email'].errors"> 
                <ng-container *ngIf="registerFormGroup.controls['email'].hasError('required')">
                  El email es requerido.
                </ng-container>
                <ng-container *ngIf="registerFormGroup.controls['email'].hasError('email')">
                  Por favor, introduce un email válido.
                </ng-container>
                <ng-container *ngIf="registerFormGroup.controls['email'].hasError('maxlength')">
                  No puede tener más de 50 caracteres.
                </ng-container>
              </mat-error>
              </mat-form-field>

              <!-- Contraseña -->
              <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Contraseña</mat-label>
              <mat-form-field appearance="outline" class="w-100" color="primary">
                  <input
                  matInput
                  placeholder="Contraseña"
                  formControlName="password"
                  required="true"
                  [type]="hidePassword ? 'password' : 'text'"
                  />
                  <button 
                    mat-icon-button 
                    matSuffix 
                    (click)="togglePasswordVisibility()" 
                    [attr.aria-label]="'Hide password'" 
                    [attr.aria-pressed]="hidePassword"
                    type="button">
                    <mat-icon>{{hidePassword ? 'visibility' : 'visibility_off'}}</mat-icon>
                  </button>
              </mat-form-field>

              <!-- Requisitos de contraseña siempre visibles -->
              <div class="password-requirements m-t-8">
                <div class="requirement-item" [ngClass]="{'valid': hasMinLength, 'invalid': !hasMinLength}">
                  <span class="requirement-icon">{{hasMinLength ? '✓' : '✗'}}</span>
                  Al menos 10 caracteres
                </div>
                <div class="requirement-item" [ngClass]="{'valid': hasMaxLength, 'invalid': !hasMaxLength}">
                  <span class="requirement-icon">{{hasMaxLength ? '✓' : '✗'}}</span>
                  Máximo 16 caracteres
                </div>
                <div class="requirement-item" [ngClass]="{'valid': hasUppercase, 'invalid': !hasUppercase}">
                  <span class="requirement-icon">{{hasUppercase ? '✓' : '✗'}}</span>
                  Al menos una letra mayúscula
                </div>
                <div class="requirement-item" [ngClass]="{'valid': hasNumber, 'invalid': !hasNumber}">
                  <span class="requirement-icon">{{hasNumber ? '✓' : '✗'}}</span>
                  Al menos un número
                </div>
                <div class="requirement-item" [ngClass]="{'valid': hasSpecialChar, 'invalid': !hasSpecialChar}">
                  <span class="requirement-icon">{{hasSpecialChar ? '✓' : '✗'}}</span>
                  Al menos uno de estos caracteres: . * - % /
                </div>
                <div class="requirement-item" [ngClass]="{'valid': hasNoConsecutiveLetters, 'invalid': !hasNoConsecutiveLetters}">
                  <span class="requirement-icon">{{hasNoConsecutiveLetters ? '✓' : '✗'}}</span>
                  Sin letras iguales consecutivas
                </div>
              </div>

              <mat-error *ngIf="typeError === 'conflicto'">Nombre de usuario o correo electrónico ya existe.</mat-error>
  
              <button class="w-100 m-t-10" (click)="register()" mat-flat-button color="primary" [disabled]="!registerFormGroup.valid">
                Registrar
              </button>
            </form>

            <span class="d-block f-w-500 text-center m-t-24 f-s-14">¿Ya tienes una cuenta?
              <a [routerLink]="['/login']" class="text-decoration-none text-primary f-w-500 f-s-14">
                Entra aquí</a>
            </span>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
</div>